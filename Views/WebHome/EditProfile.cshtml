@model ScopeIndia.Models.StudentModel

@{
    ViewData["Title"] = "Edit Student";
}



<h2 class="text-warning text-center pt-4">Profile update</h2>

<form asp-action="EditProfile" asp-controller="WebHome" method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="Id" />

    <div style="position:relative; left:34%; width:500px;" >   
        <div class="mb-3">
            <label asp-for="FirstName" class="form-label">First Name</label>
            <input asp-for="FirstName" class="form-control" value="@ViewBag.FirstName"/>
        </div>
        <div class="mb-3">
            <label asp-for="LastName" class="form-label">Last Name</label>
            <input asp-for="LastName" class="form-control" value="@ViewBag.LastName"/>
        </div>

        <div class="mb-3">
            <label asp-for="Gender" class="fw-bold">Gender</label>
            <div class="form-check form-check-inline">
                <input type="text" value="@ViewBag.Gender" id="GenderSelector" hidden/>
                <input type="radio" asp-for="Gender" id="Male" value="@ViewBag.Gender" class="form-check-input" disabled>
            <label asp-for="Gender" class="form-check-label">Male</label>
        </div>
        <div class="form-check form-check-inline">
                <input type="radio" asp-for="Gender" id="Female" value="@ViewBag.Gender" class="form-check-input" disabled>
            <label asp-for="Gender" class="form-check-label">Female</label>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="form-floating">

                    <input asp-for="DOB" class="form-control" id="DOB" type="date" value="@(((DateTime)ViewBag.DOB).ToString("yyyy-MM-dd"))" readonly />
                <label asp-for="DOB">Date of Birth</label>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="form-floating">
                <input asp-for="Email" class="form-control" id="Email" placeholder="Email"  value="@ViewBag.Email" readonly/>
                <label asp-for="Email">E-mail</label>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <div class="form-floating">
            <input asp-for="PhNo" class="form-control" id="PhNo" placeholder="Phone Number" value="@ViewBag.PhNo"/>
            <label asp-for="PhNo">Phone Number</label>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4 mb-3">
            <label asp-for="Country" class="fw-bold">Country:</label>
            <select asp-for="Country" id="Country" class="form-select" name="Country">
            </select>
        </div>
        <div class="col-md-4 mb-3">
            <label asp-for="State" class="fw-bold">State:</label>
            <select asp-for="State" id="State" class="form-select" name="State"></select>
       
        </div>
        <div class="col-md-4 mb-3">
            <label asp-for="City" class="fw-bold">City:</label>
            <select asp-for="City" id="City" class="form-select" name="City"></select>
        </div>
    </div>

    <div class="mb-3">
        <label asp-for="Hobbies" class="fw-bold">Hobbies:</label>
        <div class="row">
            <div class="col-md-6">
                <div class="form-check">
                    <input type="checkbox" name="Hobbies" id="sports" value="Sports" class="form-check-input">
                    <label for="sports" class="form-check-label">Sports</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="Hobbies" id="books" value="Reading Books" class="form-check-input">
                    <label for="books" class="form-check-label">Reading Books</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="Hobbies" id="movies" value="Watching Movies" class="form-check-input">
                    <label for="movies" class="form-check-label">Watching Movies</label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-check">
                    <input type="checkbox" name="Hobbies" id="Travel" value="Traveling" class="form-check-input">
                    <label for="Travel" class="form-check-label">Traveling</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="Hobbies" id="music" value="Listening to Music" class="form-check-input">
                    <label for="music" class="form-check-label">Listening to Music</label>
                </div>
                <div class="form-floating">
                    <textarea asp-for="Hobbies" name="Hobbies" id="OtherHobbies" class="form-control" placeholder="Specify others"></textarea>
                    <label for="OtherHobbies">Specify others</label>
                </div>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label asp-for="Avatar" class="fw-bold">Upload Avatar:</label>
        <input type="file" asp-for="Avatar" name="avatar" class="form-control" />
    </div>
    

    <div class="d-grid">
        <button class="btn btn-success btn-lg" type="submit">Update</button>
    </div>
  </div>
</form>

@section Scripts
{
    @await Html.PartialAsync("/Views/Shared/_ValidationScriptsPartial.cshtml")

    <script>
        var genderValue = "@ViewBag.Gender";
        if (genderValue.toLowerCase() === 'male') {
            document.getElementById("Male").checked = true;
        } else {
            document.getElementById("Female").checked = true;
        }

        $(document).ready(function () {
            var selectedCountry = "@ViewBag.Country";
            var selectedState = "@ViewBag.State";
            var selectedCity = "@ViewBag.City";

            // Country list
            var country_arr = ["Select Country", "AUSTRALIA", "INDIA", "NEW ZEALAND", "USA", "UAE", "MAURITIUS"];
            $.each(country_arr, function (i, item) {
                $('#Country').append($('<option>', {
                    value: item,
                    text: item
                }));
            });

            $('#Country').val(selectedCountry);

            // States
            var s_a = {
                "Select Country": "Select State",
                "AUSTRALIA": "Select State|QUEENSLAND|VICTORIA",
                "INDIA": "Select State|ANDHRAPRADESH|KARNATAKA|TAMILNADU|DELHI|GOA|W-BENGAL|GUJARAT|MADHYAPRADESH|MAHARASHTRA|RAJASTHAN|KERALA",
                "NEW ZEALAND": "Select State|AUCKLAND",
                "USA": "Select State|NEWJERSEY|ILLINOIS",
                "UAE": "Select State|DUBAI",
                "MAURITIUS": "Select State|MAURITIUS"
            };

            // Cities
            var c_a = {
                "QUEENSLAND": "BRISBANE",
                "VICTORIA": "MELBOURNE",
                "ANDHRAPRADESH": "HYDERABAD",
                "KARNATAKA": "BANGLORE",
                "TAMILNADU": "CHENNAI",
                "DELHI": "DELHI",
                "GOA": "GOA",
                "W-BENGAL": "KOLKATA",
                "GUJARAT": "AHMEDABAD1|AHMEDABAD2|AHMEDABAD3|BARODA|BHAVNAGAR|MEHSANA|RAJKOT|SURAT|UNA",
                "MADHYAPRADESH": "INDORE",
                "MAHARASHTRA": "MUMBAI|PUNE",
                "RAJASTHAN": "ABU",
                "AUCKLAND": "AUCKLAND",
                "NEWJERSEY": "EDISON",
                "ILLINOIS": "CHICAGO",
                "DUBAI": "DUBAI",
                "MAURITIUS": "MAURITIUS",
                "KERALA": "TRIVANDRUM|MALAPPURAM|WAYANAD|KANNUR|KOZHIKKODE|PATHANAMTHITTA|KOTTAYAM|IDUKKI|KASARGOD|ALAPPUZHA|PALAKKAD|THRISSUR|ERNAMKULAM|KOLLAM"
            };

            // Populate states
            if (selectedCountry && s_a[selectedCountry]) {
                var state_arr = s_a[selectedCountry].split("|");
                $('#State').empty();
                $.each(state_arr, function (i, item) {
                    $('#State').append($('<option>', {
                        value: item,
                        text: item
                    }));
                });
                $('#State').val(selectedState);
            }

            // Populate cities
            if (selectedState && c_a[selectedState]) {
                var city_arr = c_a[selectedState].split("|");
                $('#City').empty();
                $.each(city_arr, function (i, item) {
                    $('#City').append($('<option>', {
                        value: item,
                        text: item
                    }));
                });
                $('#City').val(selectedCity);
            }

            // Country change
            $('#Country').change(function () {
                var c = $(this).val();
                var state_arr = s_a[c] ? s_a[c].split("|") : ["Select State"];
                $('#State').empty();
                $('#City').empty();

                $.each(state_arr, function (i, item_state) {
                    $('#State').append($('<option>', {
                        value: item_state,
                        text: item_state
                    }));
                });

                $('#City').append($('<option>', {
                    value: '',
                    text: 'Select City'
                }));
            });

            // State change
            $('#State').change(function () {
                var s = $(this).val();
                var city_arr = c_a[s] ? c_a[s].split("|") : ["Select City"];
                $('#City').empty();

                $.each(city_arr, function (i, item_city) {
                    $('#City').append($('<option>', {
                        value: item_city,
                        text: item_city
                    }));
                });
            });
        });


    </script>
}